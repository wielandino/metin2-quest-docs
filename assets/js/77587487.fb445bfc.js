"use strict";(globalThis.webpackChunkmetin2_quest_docs=globalThis.webpackChunkmetin2_quest_docs||[]).push([[232],{8453(e,n,t){t.d(n,{R:()=>i,x:()=>c});var l=t(6540);const s={},a=l.createContext(s);function i(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(a.Provider,{value:n},e.children)}},9339(e,n,t){t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var l=t(4848),s=t(8453);const a={sidebar_position:7},i="Quick Reference",c={id:"reference",title:"Quick Reference",description:"Essential Commands",source:"@site/docs/reference.md",sourceDirName:".",slug:"/reference",permalink:"/metin2-quest-docs/reference",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Best Practices",permalink:"/metin2-quest-docs/best-practices"}},r={},d=[{value:"Essential Commands",id:"essential-commands",level:2},{value:"Player Commands",id:"player-commands",level:3},{value:"Dialog System",id:"dialog-system",level:3},{value:"Chat &amp; Notifications",id:"chat--notifications",level:3},{value:"NPC Commands",id:"npc-commands",level:3},{value:"Item Commands",id:"item-commands",level:3},{value:"Control Flow",id:"control-flow",level:3},{value:"Time &amp; Math",id:"time--math",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Daily Reset",id:"daily-reset",level:3},{value:"Cooldown Check",id:"cooldown-check",level:3},{value:"Level Requirement",id:"level-requirement",level:3},{value:"Gold Check",id:"gold-check",level:3},{value:"Item Count Check",id:"item-count-check",level:3},{value:"Table Iteration",id:"table-iteration",level:3},{value:"Quest Template",id:"quest-template",level:2},{value:"Complete Quest Examples",id:"complete-quest-examples",level:2},{value:"Simple Reward Quest",id:"simple-reward-quest",level:3},{value:"Daily Kill Quest",id:"daily-kill-quest",level:3},{value:"Item Shop",id:"item-shop",level:3},{value:"Tips &amp; Tricks",id:"tips--tricks",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,l.jsx)(n.h2,{id:"essential-commands",children:"Essential Commands"}),"\n",(0,l.jsx)(n.h3,{id:"player-commands",children:"Player Commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Character Info\npc.get_name()              -- Player name\npc.get_level()             -- Current level\npc.get_gold()              -- Yang amount\npc.get_exp()               -- Current EXP\n\n-- Modify Resources\npc.change_gold(amount)     -- Add/subtract yang\npc.give_item2(vnum, count) -- Give items\npc.give_exp2(amount)       -- Give EXP with bonuses\n\n-- Quest Flags\npc.setqf(name, value)      -- Set persistent flag\npc.getqf(name)             -- Get flag value\npc.delqf(name)             -- Delete flag\n\n-- Teleport\npc.warp(x, y)              -- Teleport (pixels * 100)\npc.warp_to_village()       -- Return to spawn\n\n-- Checks\npc.hasguild()              -- Has guild?\npc.is_gm()                 -- Is GM?\npc.in_dungeon()            -- In dungeon?\n"})}),"\n",(0,l.jsx)(n.h3,{id:"dialog-system",children:"Dialog System"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Dialog Text\nsay_title(title)           -- Set title\nsay(text)                  -- Add line\nsay_reward(text)           -- Green text\nsay("")                    -- Empty line\n\n-- Selection\nselect("Opt1", "Opt2")     -- Returns 1, 2, etc.\nselect_table(table, cancel)-- Table-based menu\ninput()                    -- Text input\n\n-- Multi-page\nwait()                     -- Next page\n'})}),"\n",(0,l.jsx)(n.h3,{id:"chat--notifications",children:"Chat & Notifications"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"chat(text)                 -- White chat message\nsyschat(text)              -- Yellow system message\nnotice(text)               -- Server-wide notice\n"})}),"\n",(0,l.jsx)(n.h3,{id:"npc-commands",children:"NPC Commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"npc.get_race()             -- NPC vnum\nnpc.get_level()            -- NPC level\nnpc.open_shop()            -- Open shop\n"})}),"\n",(0,l.jsx)(n.h3,{id:"item-commands",children:"Item Commands"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"item.get_vnum()            -- Item vnum\nitem.get_count()           -- Stack count\nitem.remove()              -- Remove item\nitem_name(vnum)            -- Get name by vnum\n"})}),"\n",(0,l.jsx)(n.h3,{id:"control-flow",children:"Control Flow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"set_state(name)            -- Change quest state\ntimer(name, seconds)       -- Set timer\nreturn                     -- Exit event\n"})}),"\n",(0,l.jsx)(n.h3,{id:"time--math",children:"Time & Math"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'get_time()                 -- Unix timestamp\nos.date("%Y%m%d")          -- Date string\nnumber(min, max)           -- Random number\nmath.floor(n)              -- Round down\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,l.jsx)(n.h3,{id:"daily-reset",children:"Daily Reset"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local today = tonumber(os.date("%Y%m%d"))\nif today ~= pc.getqf("last_day") then\n    pc.setqf("counter", 0)\n    pc.setqf("last_day", today)\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"cooldown-check",children:"Cooldown Check"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'local current = get_time()\nlocal last = pc.getqf("last_use")\nif current - last < 3600 then\n    say("Cooldown active!")\n    return\nend\npc.setqf("last_use", current)\n'})}),"\n",(0,l.jsx)(n.h3,{id:"level-requirement",children:"Level Requirement"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'if pc.get_level() < 50 then\n    say("Need level 50!")\n    return\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"gold-check",children:"Gold Check"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'if pc.get_gold() < 1000 then\n    say("Need 1000 Yang!")\n    return\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"item-count-check",children:"Item Count Check"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'if pc.count_item(30001) < 10 then\n    say("Need 10 items!")\n    return\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"table-iteration",children:"Table Iteration"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"for i, data in ipairs(table) do\n    -- use data\nend\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"quest-template",children:"Quest Template"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'quest template begin\n    state start begin\n        when login begin\n            -- Initialize\n        end\n        \n        when 9006.click begin\n            say_title("NPC:")\n            say("Dialog text")\n            \n            if select("Yes", "No") == 1 then\n                -- Action\n                set_state(next_state)\n            end\n        end\n    end\n    \n    state next_state begin\n        when button begin\n            say("Progress info")\n        end\n    end\n    \n    state __COMPLETE__ begin\n    end\nend\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"complete-quest-examples",children:"Complete Quest Examples"}),"\n",(0,l.jsx)(n.h3,{id:"simple-reward-quest",children:"Simple Reward Quest"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'quest simple_reward begin\n    state start begin\n        when 9006.click begin\n            if pc.getqf("received") == 1 then\n                say("Already received!")\n                return\n            end\n            \n            say_title("Friendly NPC:")\n            say("Welcome! Have a gift!")\n            \n            pc.give_item2(30001, 1)\n            pc.change_gold(100000)\n            pc.setqf("received", 1)\n            \n            say_reward("You received a sword and 100k yang!")\n        end\n    end\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"daily-kill-quest",children:"Daily Kill Quest"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'quest daily_kills begin\n    state start begin\n        when login begin\n            local today = tonumber(os.date("%Y%m%d"))\n            local last_day = pc.getqf("last_reset")\n            \n            if today ~= last_day then\n                pc.setqf("kills", 0)\n                pc.setqf("claimed", 0)\n                pc.setqf("last_reset", today)\n            end\n        end\n        \n        when kill begin\n            if pc.getqf("claimed") == 0 then\n                local kills = pc.getqf("kills") + 1\n                pc.setqf("kills", kills)\n                \n                if kills >= 100 then\n                    syschat("Daily quest complete!")\n                end\n            end\n        end\n        \n        when 9006.click begin\n            local kills = pc.getqf("kills")\n            local claimed = pc.getqf("claimed")\n            \n            say_title("Daily Quest:")\n            say("Progress: "..kills.."/100")\n            \n            if claimed == 1 then\n                say("Already claimed today!")\n            elseif kills >= 100 then\n                if select("Claim Reward", "Later") == 1 then\n                    pc.change_gold(1000000)\n                    pc.setqf("claimed", 1)\n                end\n            end\n        end\n    end\nend\n'})}),"\n",(0,l.jsx)(n.h3,{id:"item-shop",children:"Item Shop"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'quest item_shop begin\n    state start begin\n        when 9006.click begin\n            say_title("Item Shop:")\n            \n            local items = {\n                {"Sword", 30001, 100000},\n                {"Armor", 11209, 500000},\n                {"Helmet", 12209, 250000}\n            }\n            \n            local menu = {}\n            for i, data in ipairs(items) do\n                table.insert(menu, data[1].." - "..data[3].." Yang")\n            end\n            table.insert(menu, "Exit")\n            \n            local s = select_table(menu, "")\n            \n            if s == #menu then\n                return\n            end\n            \n            local item = items[s]\n            \n            if pc.get_gold() >= item[3] then\n                pc.change_gold(-item[3])\n                pc.give_item2(item[2], 1)\n                say_reward("Purchase complete!")\n            else\n                say("Not enough Yang!")\n            end\n        end\n    end\nend\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"tips--tricks",children:"Tips & Tricks"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Always"})," check prerequisites (level, gold, items) before actions"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.strong,{children:"local variables"})," to cache frequently accessed values"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Early returns"})," improve code readability"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.strong,{children:"descriptive names"})," for quest flags"]}),"\n",(0,l.jsxs)(n.li,{children:["Test with ",(0,l.jsx)(n.strong,{children:"GM characters"})," for faster development"]}),"\n",(0,l.jsxs)(n.li,{children:["Add ",(0,l.jsx)(n.strong,{children:"debug chat messages"})," during development (remove before release)"]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.strong,{children:"tables"})," for item lists and menus"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Document"})," complex logic with comments"]}),"\n",(0,l.jsxs)(n.li,{children:["Keep ",(0,l.jsx)(n.strong,{children:"quest names"})," matching ",(0,l.jsx)(n.strong,{children:"file names"})]}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.strong,{children:"state changes"})," for multi-step quests"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);